model User {
  id             Int             @id @default(autoincrement())
  username       String          @unique
  email          String          @unique
  password       String
  createdAt      DateTime        @default(now())
  gender         Gender
  settings       Json?
  isAdmin        Boolean         @default(false)
  inventory      InventoryItem[]
  stats          UserStats?
  characterStats CharacterStats?
  sessions       Session[]
  habits         Habit[]
  tasks          Task[]
  taskTags       TaskTag[]
  taskLists      TaskList[]
  token          Token[]
  logs           Log[]
}

model Item {
  id          Int             @id @default(autoincrement())
  name        String
  description String?
  category    ItemCategory
  price       Int
  attributes  Json?
  collection  ItemCollection
  inventory   InventoryItem[]
}

model InventoryItem {
  id         Int      @id @default(autoincrement())
  userId     Int
  itemId     Int
  quantity   Int      @default(1)
  isEquiped  Boolean  @default(false)
  acquiredAt DateTime @default(now())
  item       Item     @relation(fields: [itemId], references: [id])
  user       User     @relation(fields: [userId], references: [id])
}

model UserStats {
  id         Int  @id
  user       User @relation(fields: [id], references: [id], onDelete: Cascade)
  level      Int  @default(1)
  experience Int  @default(0)
  gold       Int  @default(0)
  health     Int  @default(100)
  mana       Int  @default(100)
  energy     Int  @default(0)
}

model CharacterStats {
  id           Int  @id @default(autoincrement())
  user         User @relation(fields: [id], references: [id], onDelete: Cascade)
  damage       Int  @default(1)
  guard        Int  @default(1)
  witchcraft   Int  @default(1)
  stamina      Int  @default(1)
  luck         Int  @default(1)
  intelligence Int  @default(1)
}

model Token {
  id           Int      @id @default(autoincrement())
  userId       Int?
  refreshToken String   @unique
  updatedAt    DateTime @updatedAt
  User         User?    @relation(fields: [userId], references: [id])
}

enum Gender {
  MALE
  FEMALE
}

enum ItemCategory {
  SWORD
  BOW
  DAGGER
  STICK
  HAT
  ARMOR
  PANTS
  BOOTS
  FOOD
  DRINK
  POTION
}

enum ItemCollection {
  DEFAULT
  BEGINNER
}
